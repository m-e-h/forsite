/* ////
/// Gallery block.
///
/// @group  Blocks
/// @author Marty Helmick <info@martyhelmick.com>
/// @link   https://github.com/m-e-h/forsite
//// */

/* // The wrapper element for the entire gallery. */
.wp-block-gallery {
	display: flex;
	flex-wrap: wrap;
	list-style-type: none;
	padding: 0;
	margin-left: auto;
	margin-right: auto;
}

/* // The wrapper for individual gallery images/figures. */
.blocks-gallery-item {
	margin: 0 0.5rem 0.5rem 0;
	display: flex;
	flex-grow: 1;
	flex-direction: column;
	justify-content: center;
	position: relative;

	/* // Image figure. */
	& figure {
		margin: 0;
		height: 100%;
		display: flex;
		align-items: flex-end;
		justify-content: flex-start;
	}

	& figcaption {
		position: absolute;
		bottom: 0;
		width: 100%;
		max-height: 100%;
		padding: $h1 $h6 0.5rem;
		text-align: center;
		color: white;
		background: linear-gradient(
			0deg,
			rgba(0, 0, 0, 0.7) 0,
			rgba(0, 0, 0, 0.3) 60%,
			transparent
		);

		& img {
			display: inline;
		}
	}
}

.is-cropped .blocks-gallery-item {
	& a,
	& img {
		flex: 1;
		width: 100%;
		flex: 1;
		height: 100%;
		object-fit: cover;
	}
}

/* // Fallback to 2 columns. */
.blocks-gallery-item {
	width: calc(100% / 2 - 1rem);
}

/* // 1 column. */
.columns-1 .blocks-gallery-item {
	width: calc(100% / 1 - 1rem);
}

@media (--md) {
	.columns-3 .blocks-gallery-item {
		width: calc(100% / 3 - 1rem);
	}

	.columns-4 .blocks-gallery-item {
		width: calc(100% / 4 - 1rem);
	}
}
